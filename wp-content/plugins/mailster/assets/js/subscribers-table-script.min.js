mailster=function(s,r,a,e){"use strict";var t,o=false,l,c;s.$.document.on("click","#filter, .mailster-condition-render-group",function(){s.util.tb_show(s.l10n.subscribers.filters,"#TB_inline?x=1&width=720&height=520&inlineId=mailster-subscriber-conditions",null)}).on("click","#filter, .mailster-condition-remove",function(e){e.stopPropagation()}).on("click","#apply-filter",function(){var e=s.conditions.serialize();var i=new URLSearchParams(a.location.search);var n=Object.fromEntries(i.entries());var r=u(n,"conditions");var t=Object.keys(r).map(function(e){return e+"="+r[e]}).join("&");if(i.toString()!=t+"&"+e){a.location.search=t+"&"+e}tb_remove()}).on("click","#close-filter",tb_remove).on("change","#cb-select-all-1, #cb-select-all-2",function(){var e=r("#all_subscribers"),i=e.data("label"),n=r(".subscriber_cb");l=e.data("count");c=n.length;if(r(this).is(":checked")&&l>r("#the-list").find("tr").length&&confirm(i)){n.prop("disabled",true);e.val(1)}else{e.val(0);n.prop("disabled",false)}}).on("submit","#subscribers-overview-form",function(e){var i=r(this),n=r("#all_subscribers");if(1==n.val()){e.preventDefault();if(o)return;o=true;a.onbeforeunload=function(){return s.l10n.subscribers.onbeforeunload};t=r('<div class="alignright bulk-update-info spinner">'+s.l10n.subscribers.initprogess+"</div>").prependTo(".bulkactions");f(i.serialize(),0,function(){t.removeClass("spinner");a.onbeforeunload=null;setTimeout(function(){location.reload()},1e3)})}});function u(e,i){var n={};for(var r in e){if(r.indexOf(i)==-1){n[r]=e[r]}}return n}function i(e,i){i=i.split("?");var n=i.length==1?"":i[1];n=n.replace(new RegExp("&?"+e+"\\[\\d*\\]=[\\w]+","g"),"");n=n.replace(new RegExp("&?"+e+"=[\\w]+","g"),"");n=n.replace(/^&/,"");return i[0]+(n.length?"?"+n:"")}function f(i,e,n){if(!e)e=0;r.post(location.href,{all_subscribers:true,post_data:i,page:e,per_page:c,count:l},function(e){t.html(e.data.message);if(e.success_message)s.log(e.success_message);if(e.data.error_message)s.log(e.data.error_message,"error");if(!e.data.finished){setTimeout(function(){f(i,e.data.page,n)},e.data.delay?e.data.delay:300)}else{n&&n()}})}return s}(mailster||{},jQuery,window,document);