{"version":3,"file":"7554.22e178d7e6be669845b7.chunk.js","mappings":"gLAwHA,UA/GyBA,UACvB,IAAIC,EAAc,EACdC,EAAa,EAEjB,MAAMC,EAAcC,EAAMC,cAAc,cAClCC,EAAcF,EAAMC,cAAc,cAClCE,EAAgBH,EAAMC,cAAc,mBACpCG,EAAmBJ,EAAMC,cAAc,YACvCI,EAAiBC,SAASC,cAAc,OAW9C,SAASC,EAAsBR,GAC7B,MAAMS,EAAST,EAAMC,cAAc,2BAC/BQ,GACFA,EAAOC,eAAe,CACpBC,SAAU,SACVX,MAAO,SAGb,CAjBAK,EAAeO,UAAUC,IAAI,mBAC7BR,EAAeS,MAAMC,QAAU,OAC/BZ,EAAca,YAAYX,GAiB1B,MAAMY,EAAkBX,SAASY,gBAAgBC,MAAQ,KACnDC,EAAkC,UAApBH,EAA8B,KAAOA,EACzD,IACII,EAEJ,SAASC,EAAUC,GAIfF,EAAM,GAAGG,OAAOC,SAASC,iEAAiEH,UAAaH,IAGzGjB,EAAcwB,UAAY,GAC1BxB,EAAca,YAAYX,GAC1BA,EAAeS,MAAMC,QAAU,QAE/Ba,MAAMP,GACHQ,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAM,uBAAuBF,EAASG,UAElD,OAAOH,EAASI,MAAM,IAEvBL,MAAKM,IACJ9B,EAAeS,MAAMC,QAAU,OAC/BZ,EAAcwB,UAAYQ,EAAKC,MAE/BtC,EAAaqC,EAAKrC,WAClBD,EAAc0B,EAUpB,WACEnB,EAAiBuB,UAAY,GAE7B,IAAK,IAAIU,EAAI,EAAGA,GAAKvC,EAAYuC,IAAK,CACpC,IAAIC,EAAgBhC,SAASC,cAAc,OAC3C+B,EAAc1B,UAAUC,IAAI,SAAU,UAAW,SAAU,YAC3DyB,EAAcC,UAAYF,EAEtBA,IAAMxC,GACRyC,EAAc1B,UAAUC,IAAI,UAG9ByB,EAAcE,iBAAiB,SAAS,KAClCH,IAAMxC,IACRyB,EAAUe,GACV7B,EAAsBR,GACxB,IAGFI,EAAiBY,YAAYsB,EAC/B,CACF,CA9BMG,GA3CJ1C,EAAYa,UAAU8B,OAAO,WAA4B,IAAhB7C,GACzCK,EAAYU,UAAU8B,OAAO,WAAY7C,GAAeC,EA2ChC,IAErB6C,OAAMC,IACLvC,EAAeS,MAAMC,QAAU,OAC/B8B,QAAQD,MAAM,uBAAwBA,EAAM,GAElD,CA0BA1C,EAAYsC,iBAAiB,SAAS,WAChC3C,EAAcC,IAChBwB,EAAUzB,EAAc,GACxBW,EAAsBR,GAE1B,IAEAD,EAAYyC,iBAAiB,SAAS,WAChC3C,EAAc,IAChByB,EAAUzB,EAAc,GACxBW,EAAsBR,GAE1B,IAEAsB,EAAUzB,IAEViD,EAAAA,EAAAA,GAAW9C,IACX+C,EAAAA,EAAAA,GAAiB/C,EAAM,C","sources":["webpack://threeSixty_theme/./src/blocks/blog_listing_block/index.js"],"sourcesContent":["import './style.scss';\nimport {imageLazyLoading} from \"../../scripts/functions/imageLazyLoading\";\nimport {animations} from \"../../scripts/general/animations\";\n\n/**\n * @author DELL\n * @param block {HTMLElement}\n * @returns {Promise<void>}\n */\nconst blogListingBlock = async (block) => {\n  let currentPage = 1;\n  let totalPages = 1;\n\n  const prevPageBtn = block.querySelector(\"#prev-page\");\n  const nextPageBtn = block.querySelector(\"#next-page\");\n  const postContainer = block.querySelector(\"#post-container\");\n  const numbersContainer = block.querySelector(\".numbers\");\n  const loadingSpinner = document.createElement(\"div\");\n\n  loadingSpinner.classList.add(\"loading-spinner\");\n  loadingSpinner.style.display = \"none\";\n  postContainer.appendChild(loadingSpinner);\n\n  function updateButtonStates() {\n    prevPageBtn.classList.toggle(\"disabled\", currentPage === 1);\n    nextPageBtn.classList.toggle(\"disabled\", currentPage >= totalPages);\n  }\n\n  function scrollToBottomContent(block) {\n    const target = block.querySelector(\".bottom-content-wrapper\");\n    if (target) {\n      target.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\"\n      });\n    }\n  }\n\n  const currentLangAttr = document.documentElement.lang || 'en';\n  const currentLang = currentLangAttr === 'en-US' ? 'en' : currentLangAttr;\n  let local = false\n  let url;\n\n  function loadPosts(page) {\n    if (local) {\n      url = `${window.location.origin}/threeSixty_theme/wp-content/themes/threeSixty_theme/load-posts.php?page=${page}&lang=${currentLang}`;\n    } else {\n      url = `${window.location.origin}/wp-content/themes/threeSixty_theme/load-posts.php?page=${page}&lang=${currentLang}`;\n    }\n\n    postContainer.innerHTML = \"\";\n    postContainer.appendChild(loadingSpinner);\n    loadingSpinner.style.display = \"block\";\n\n    fetch(url)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        return response.json();\n      })\n      .then(data => {\n        loadingSpinner.style.display = \"none\";\n        postContainer.innerHTML = data.posts;\n\n        totalPages = data.totalPages;\n        currentPage = page;\n        generatePagination();\n        updateButtonStates();\n      })\n      .catch(error => {\n        loadingSpinner.style.display = \"none\";\n        console.error(\"Error loading posts:\", error);\n      });\n  }\n\n  function generatePagination() {\n    numbersContainer.innerHTML = \"\";\n\n    for (let i = 1; i <= totalPages; i++) {\n      let numberElement = document.createElement(\"div\");\n      numberElement.classList.add(\"number\", \"text-sm\", \"medium\", \"gray-600\");\n      numberElement.innerText = i;\n\n      if (i === currentPage) {\n        numberElement.classList.add(\"active\");\n      }\n\n      numberElement.addEventListener(\"click\", () => {\n        if (i !== currentPage) {\n          loadPosts(i);\n          scrollToBottomContent(block)\n        }\n      });\n\n      numbersContainer.appendChild(numberElement);\n    }\n  }\n\n\n  nextPageBtn.addEventListener(\"click\", function () {\n    if (currentPage < totalPages) {\n      loadPosts(currentPage + 1);\n      scrollToBottomContent(block)\n    }\n  });\n\n  prevPageBtn.addEventListener(\"click\", function () {\n    if (currentPage > 1) {\n      loadPosts(currentPage - 1);\n      scrollToBottomContent(block)\n    }\n  });\n\n  loadPosts(currentPage);\n\n  animations(block);\n  imageLazyLoading(block);\n};\n\nexport default blogListingBlock;\n"],"names":["async","currentPage","totalPages","prevPageBtn","block","querySelector","nextPageBtn","postContainer","numbersContainer","loadingSpinner","document","createElement","scrollToBottomContent","target","scrollIntoView","behavior","classList","add","style","display","appendChild","currentLangAttr","documentElement","lang","currentLang","url","loadPosts","page","window","location","origin","innerHTML","fetch","then","response","ok","Error","status","json","data","posts","i","numberElement","innerText","addEventListener","generatePagination","toggle","catch","error","console","animations","imageLazyLoading"],"sourceRoot":""}